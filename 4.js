import S from"./B0CJP7pP.js";import{i as H,j as q,k as C,b as P,l as $}from"./DIDzDSBz.js";import{y as z,z as B,a as T,x as b,A as E,B as w,b as R,c as j,q as I,u as f,F as J,o as O}from"./DoqiT5Lj.js";import{_ as V}from"./B1u9NG0L.js";import"./CCnTaFCo.js";import"./d8jPmOFo.js";import"./Bzjm-jEg.js";function X(t,e){const a=e/t*100;return 2/Math.PI*100*Math.atan(a/50)}function G(t={}){const{duration:e=2e3,throttle:a=200,hideDelay:s=500,resetDelay:u=400}=t,c=t.estimatedProgress||X,i=H(),n=T(0),r=T(!1),l=T(!1);let d=!1,m,k,A,g;const p=()=>{l.value=!1,_(0)};function _(o=0){if(!i.isHydrating){if(o>=100)return h();v(),n.value=o<0?0:o,a?k=setTimeout(()=>{r.value=!0,F()},a):(r.value=!0,F())}}function L(){A=setTimeout(()=>{r.value=!1,g=setTimeout(()=>{n.value=0},u)},s)}function h(o={}){n.value=100,d=!0,v(),N(),o.error&&(l.value=!0),o.force?(n.value=0,r.value=!1):L()}function N(){clearTimeout(A),clearTimeout(g)}function v(){clearTimeout(k),cancelAnimationFrame(m)}function F(){d=!1;let o;function x(y){if(d)return;o??(o=y);const M=y-o;n.value=Math.max(0,Math.min(100,c(e,M))),m=requestAnimationFrame(x)}m=requestAnimationFrame(x)}let D=()=>{};{const o=i.hook("page:loading:start",()=>{p()}),x=i.hook("page:loading:end",()=>{h()}),y=i.hook("vue:error",()=>h());D=()=>{y(),o(),x(),v()}}return{_cleanup:D,progress:b(()=>n.value),isLoading:b(()=>r.value),error:b(()=>l.value),start:p,set:_,finish:h,clear:v}}function K(t={}){const e=H(),a=e._loadingIndicator=e._loadingIndicator||G(t);return z()&&(e._loadingIndicatorDeps=e._loadingIndicatorDeps||0,e._loadingIndicatorDeps++,B(()=>{e._loadingIndicatorDeps--,e._loadingIndicatorDeps===0&&(a._cleanup(),delete e._loadingIndicator)})),a}const Q=E({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},errorColor:{type:String,default:"repeating-linear-gradient(to right,#f87171 0%,#ef4444 100%)"},estimatedProgress:{type:Function,required:!1}},setup(t,{slots:e,expose:a}){const{progress:s,isLoading:u,error:c,start:i,finish:n,clear:r}=K({duration:t.duration,throttle:t.throttle,estimatedProgress:t.estimatedProgress});return a({progress:s,isLoading:u,error:c,start:i,finish:n,clear:r}),()=>w("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${t.height}px`,opacity:u.value?1:0,background:c.value?t.errorColor:t.color||void 0,backgroundSize:`${100/s.value*100}% auto`,transform:`scaleX(${s.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},e)}}),oe={__name:"default",async setup(t){let e,a;const[s,u,c,i]=([e,a]=R(()=>Promise.all([P("/pages/?type=home.HomePage"),P("/menus/"),P("/categories/"),P("/acf/")])),e=await e,a(),e),n=s.data,r=u.data,l=c,d=i.data,m=q();return C(()=>({link:[{rel:"canonical",href:"https://onmalika.uz"+m.path}]})),(k,A)=>{const g=S,p=Q,_=$,L=V;return O(),j(J,null,[I(g,{catHeader:f(l),acf:f(d)},null,8,["catHeader","acf"]),I(p),I(_,{indexPage:f(l).data,menus:f(r),pageFind:f(n)},null,8,["indexPage","menus","pageFind"]),I(L,{acf:f(d)},null,8,["acf"])],64)}}};export{oe as default};
