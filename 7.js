import{p as M,g as J,f as O,h as N,o as q,b as A,d as y,c as W,s as z}from"./DIDzDSBz.js";import{x as U,a as x,w as Z,o as s,c as a,g as o,u as e,i as l,q as C,h as b,t as u,e as F,n as f,l as j,p as G,F as I,d as B,N as H,P as K,S as X,s as Y}from"./DoqiT5Lj.js";const D=M("/img/in-stock.svg"),E=M("/img/out-stock.svg"),Q=M("/img/soon-stock.svg"),tt={class:"card onmalika-card h-100 mini-card"},et={class:"onmalika-card-badges"},ot={key:0,class:"badge onmalika-card-badges-new",style:{"background-color":"#80ee98"}},st={key:1,class:"badge onmalika-card-badges-new",style:{"background-color":"#ff4a4a"}},at=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),it=[at],nt={key:1,class:"onmalika-card-favorite","data-bs-toggle":"modal","data-bs-target":"#authModal"},ct=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rt=[ct],dt=["src","alt"],lt=["alt"],ut={class:"card-body onmalika-card-body"},_t={class:"onmalika-card-title","data-bs-dismiss":"modal"},pt={key:0,class:"onmalika-card-stock"},ht=o("img",{src:D,width:"20",height:"20",alt:"Есть в наличии"},null,-1),gt=o("p",null,"Есть в наличии",-1),mt=[ht,gt],kt={key:1,class:"onmalika-card-stock"},yt=o("img",{src:E,width:"20",height:"20",alt:"Нет в наличии"},null,-1),bt=o("p",null,"Нет в наличии",-1),vt=[yt,bt],Ct={key:2,class:"onmalika-card-stock"},ft=o("img",{src:Q,width:"20",height:"20",alt:"Скоро"},null,-1),wt=o("p",null,"Скоро",-1),$t=[ft,wt],Lt={class:"onmalika-card-price"},St={key:4,class:"onmalika-card-body-orderbtn"},xt={key:1,class:"product-counter"},Ft={class:"onmalika-card-body-orderbtn-rating"},Pt=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z",fill:"#FFB800"})],-1),Tt={key:5,class:"onmalika-card-body-orderbtn"},It={class:"onmalika-card-body-orderbtn-rating"},Bt=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z",fill:"#FFB800"})],-1),V={__name:"MiniCard",props:{product_info:{type:Object,required:!0},userFav:{type:Boolean,required:!1}},setup(w){const _=J(),p=O(),h=w,{product_info:t}=h,L=N("token_access"),$=U(()=>{if(t&&t.price&&t.sale_price)return 100-(t.sale_price*100/t.price).toFixed(0)}),v=async()=>{_.isAuthenticated&&(await A("/user/favorites/",{method:"POST",headers:{Authorization:`Bearer ${L.value}`},body:{user:_.user.id,product_id:t.id}}),y().add(t),y().addedInCard=!1,y().addedInFav=!0)},k=x(1),r=d=>{p.isProductInCart(d.id)||(k.value=1),p.addToCart(d,k.value),y().add(d),y().addedInCard=!0,y().addedInFav=!1};Z(()=>p.items,d=>{const c=d.find(m=>m.product.id===t.id);c&&(k.value=c.quantity)},{deep:!0});const i=q(),n=d=>{const c=i.currencies.find(R=>R.code===i.selectedCurrency);if(!c)return"Цена не доступна";const m=parseFloat(c.exchange_rate);return`${(d*m).toLocaleString()} ${c.symbol}`},g=x(!1);return(()=>{const d=new Date,c=new Date(t.first_published_at),m=d.getTime()-c.getTime(),S=7*24*60*60*1e3;m<=S&&m>=0?g.value=!0:g.value=!1})(),(d,c)=>{const m=W,S=z;return s(),a("div",tt,[o("div",et,[e(g)?(s(),a("span",ot,"new")):l("",!0),e($)?(s(),a("span",st,"-20%")):l("",!0)]),e(_).isAuthenticated?(s(),a("button",{key:0,class:"onmalika-card-favorite",onClick:v},it)):(s(),a("button",nt,rt)),C(m,{to:"/shop/"+e(t).category.parent.slug+"/"+e(t).category.slug+"/"+e(t).slug},{default:b(()=>[e(t)&&e(t).image&&e(t).image.mini?(s(),a("img",{key:0,src:e(t).image.mini,width:"174",height:"174",alt:e(t).name,loading:"lazy",class:"card-img-top","data-bs-dismiss":"modal"},null,8,dt)):(s(),a("img",{key:1,src:"https://placehold.co/250x250",class:"w-100",alt:e(t).name},null,8,lt))]),_:1},8,["to"]),o("div",ut,[C(m,{class:"p-0",to:"/shop/"+e(t).category.parent.slug+"/"+e(t).category.slug+"/"+e(t).slug},{default:b(()=>[o("h5",_t,u(e(t).name),1)]),_:1},8,["to"]),e(t).availability=="InStock"?(s(),a("div",pt,mt)):l("",!0),e(t).availability=="OutOfStock"?(s(),a("div",kt,vt)):l("",!0),e(t).availability=="Soon"?(s(),a("div",Ct,$t)):l("",!0),e(t).availability=="InStock"?(s(),F(S,{key:3},{default:b(()=>[o("div",Lt,[e(t).sale_price?(s(),a("span",{key:0,class:f({active:e(t).sale_price})},u(n(e(t).sale_price)),3)):l("",!0),o("p",{class:f({active:e(t).sale_price})},u(n(e(t).price)),3)])]),_:1})):l("",!0),e(t).availability=="InStock"?(s(),a("div",St,[e(p).isProductInCart(e(t).id)?(s(),a("div",xt,[o("button",{type:"button",onClick:c[1]||(c[1]=T=>e(p).decreaseQuantity(e(t).id))}," - "),o("span",null,u(e(k)),1),o("button",{type:"button",onClick:c[2]||(c[2]=T=>e(p).increaseQuantity(e(t).id))}," + ")])):(s(),a("button",{key:0,onClick:c[0]||(c[0]=T=>r(e(t))),type:"button",class:"btn dark-cover justify-content-center"}," В корзину ")),o("div",Ft,[Pt,o("p",null,u(e(t).product_rate),1)])])):(s(),a("div",Tt,[C(m,{to:"/shop/"+e(t).category.parent.slug+"/"+e(t).category.slug+"/"+e(t).slug,class:"btn dark-cover justify-content-center"},{default:b(()=>[j(" Подробнее ")]),_:1},8,["to"]),o("div",It,[Bt,o("p",null,u(e(t).product_rate),1)])]))])])}}},ve=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"})),jt={class:"container"},Mt={class:"nav onmalika-tabs-product nav-pills",id:"pills-tab",role:"tablist"},Ot=["id","data-bs-target","aria-controls"],Nt={class:"tab-content onmalika-tab-content",id:"pills-tabContent"},qt=["id","aria-labelledby"],At=["src","alt"],Wt={id:"onmalika-slider"},zt={__name:"CategoryTab",props:{values:{type:Object,required:!0}},setup(w){const _=w,{values:p}=_,h=x(6);return G(()=>{window.innerWidth>=991&&(h.value=6),window.innerWidth<=991&&(h.value=4),window.innerWidth<=767&&(h.value=3),window.innerWidth<=575&&(h.value=1.3)}),(t,L)=>{const $=V,v=X,k=Y;return s(),a("section",null,[o("div",jt,[o("h2",null,u(e(p).title),1),o("ul",Mt,[(s(!0),a(I,null,B(e(p).list.list,(r,i)=>(s(),a("li",{class:"nav-item",key:r.id,role:"presentation"},[o("button",{class:f(["nav-link btn-success btn",{active:i==0}]),id:`pills-category-tab${i}`,"data-bs-toggle":"pill","data-bs-target":`#pills-category${i}`,type:"button",role:"tab","aria-controls":`pills-category${i}`,"aria-selected":"true"},u(r.category.name),11,Ot)]))),128))]),o("div",Nt,[(s(!0),a(I,null,B(e(p).list.list,(r,i)=>(s(),a("div",{class:f(["tab-pane fade",{"active show":i==0}]),key:r.id,id:`pills-category${i}`,role:"tabpanel","aria-labelledby":`pills-category-tab${i}`},[o("img",{src:r.image.url,class:"w-100 tabs-banner",alt:r.category.name,width:"1920",height:"500"},null,8,At),o("div",Wt,[r&&r.products&&r.products.length>0?(s(),F(k,{key:0,height:300,modules:["SwiperNavigation"in t?t.SwiperNavigation:e(H),"SwiperPagination"in t?t.SwiperPagination:e(K)],"slides-per-view":e(h),loop:!1,effect:"slide","wrapper-class":"row onmalika-card-margin"},{default:b(()=>[(s(!0),a(I,null,B(r.products,n=>(s(),F(v,{class:"col-xl-2 col-md-3 col-sm-4",key:n},{default:b(()=>[C($,{product_info:n},null,8,["product_info"])]),_:2},1024))),128))]),_:2},1032,["modules","slides-per-view"])):l("",!0)])],10,qt))),128))])])])}}},Ce=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),Zt={class:"col"},Dt={class:"card onmalika-card fav-card h-100"},Et=o("div",{class:"onmalika-card-badges"},[o("span",{class:"badge onmalika-card-badges-new",style:{"background-color":"#80EE98"}},"new"),o("span",{class:"badge onmalika-card-badges-new",style:{"background-color":"#FF4A4A"}},"-20%")],-1),Qt=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Vt=[Qt],Rt=["srcset"],Jt=["src"],Ut={key:2,src:"https://placehold.co/250x250",class:"w-100",alt:""},Gt={class:"card-body onmalika-card-body"},Ht={class:"onmalika-card-title"},Kt={key:0,class:"onmalika-card-stock"},Xt=o("img",{src:D,width:"24",height:"24",alt:"Есть в наличии"},null,-1),Yt=o("p",null," Есть в наличии",-1),te=[Xt,Yt],ee={key:1,class:"onmalika-card-stock"},oe=o("img",{src:E,width:"24",height:"24",alt:"Нет в наличии"},null,-1),se=o("p",null," Нет в наличии",-1),ae=[oe,se],ie={key:2,class:"onmalika-card-stock"},ne=o("img",{src:Q,width:"24",height:"24",alt:"Скоро"},null,-1),ce=o("p",null," Скоро",-1),re=[ne,ce],de={class:"onmalika-card-price"},le={key:3,class:"onmalika-card-body-orderbtn"},ue={key:1,class:"product-counter"},_e={class:"onmalika-card-body-orderbtn-rating"},pe=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z",fill:"#FFB800"})],-1),he={key:4,class:"onmalika-card-body-orderbtn"},ge={class:"onmalika-card-body-orderbtn-rating"},me=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z",fill:"#FFB800"})],-1),ke={__name:"FavoritesCard",props:{product_info:{type:Object,required:!0},onClick:Function},setup(w){const _=O(),p=N("token_access"),h=w,{product_info:t}=h,L=i=>{_.isProductInCart(i.id)||(v.value=1),_.addToCart(i,1),y().add(i),y().addedInCard=!0,y().addedInFav=!1},$=async()=>{setTimeout(()=>{h.onClick()},300);try{const i=await A("/user/favorites/"+t.id,{headers:{Authorization:`Bearer ${p.value}`},method:"DELETE"})}catch(i){console.error("Ошибка при удалении товара: ",i)}},v=x(1);Z(()=>_.items,i=>{const n=i.find(g=>g.product.id===t.product.id);n&&(v.value=n.quantity)},{deep:!0});const k=q(),r=i=>{const n=k.currencies.find(c=>c.code===k.selectedCurrency);if(!n)return"Цена не доступна";const g=parseFloat(n.exchange_rate);return`${(i*g).toLocaleString()} ${n.symbol}`};return(i,n)=>{const g=W,P=z;return s(),a("div",Zt,[o("div",Dt,[Et,o("button",{class:"onmalika-card-favorite active",onClick:$},Vt),C(g,{to:"/shop/"+e(t).product.category.parent.slug+"/"+e(t).product.category.slug+"/"+e(t).product.slug,class:"product-link"},{default:b(()=>[o("picture",null,[e(t).product&&e(t).product.image&&e(t).product.image.card?(s(),a("source",{key:0,srcset:e(t).product.image.card,media:"(max-width: 575px)"},null,8,Rt)):l("",!0),e(t).product&&e(t).product.image&&e(t).product.image.card?(s(),a("img",{key:1,src:e(t).product.image.card,class:"card-img-top",alt:"..."},null,8,Jt)):(s(),a("img",Ut))])]),_:1},8,["to"]),o("div",Gt,[o("h5",Ht,u(e(t).product.name),1),e(t).product.availability=="InStock"?(s(),a("div",Kt,te)):l("",!0),e(t).product.availability=="OutOfStock"?(s(),a("div",ee,ae)):l("",!0),e(t).product.availability=="Soon"?(s(),a("div",ie,re)):l("",!0),o("div",de,[e(t).product.availability=="InStock"?(s(),F(P,{key:0},{default:b(()=>[e(t).product.sale_price?(s(),a("span",{key:0,class:f({active:e(t).product.sale_price})},u(r(e(t).product.sale_price)),3)):l("",!0),o("p",{class:f({active:e(t).product.sale_price})},u(r(e(t).product.price)),3)]),_:1})):l("",!0)]),e(t).product.availability=="InStock"?(s(),a("div",le,[e(_).isProductInCart(e(t).product.id)?(s(),a("div",ue,[o("button",{type:"button",onClick:n[1]||(n[1]=d=>e(_).decreaseQuantity(e(t).product.id))},"-"),o("span",null,u(e(v)),1),o("button",{type:"button",onClick:n[2]||(n[2]=d=>e(_).increaseQuantity(e(t).product.id))},"+")])):(s(),a("button",{key:0,onClick:n[0]||(n[0]=d=>L(e(t).product)),type:"button",class:"btn dark-cover justify-content-center"}," В корзину ")),o("div",_e,[pe,j(" "+u(e(t).product.product_rate),1)])])):(s(),a("div",he,[C(g,{to:"/shop/"+e(t).product.category.parent.slug+"/"+e(t).product.category.slug+"/"+e(t).slug,class:"btn dark-cover justify-content-center"},{default:b(()=>[j(" Подробнее ")]),_:1},8,["to"]),o("div",ge,[me,o("p",null,u(e(t).product.product_rate),1)])]))])])])}}},fe=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{Ce as C,fe as F,ve as M,D as _,E as a,Q as b,V as c};
